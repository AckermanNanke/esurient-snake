var m=Object.defineProperty;var v=(o,e,t)=>e in o?m(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var s=(o,e,t)=>(v(o,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))d(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&d(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function d(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();class g{constructor(e,t){s(this,"boradX");s(this,"boradY");s(this,"elem");this.elem=document.getElementById("food"),this.boradX=e,this.boradY=t}getX(){return this.elem.offsetLeft}getY(){return this.elem.offsetTop}change(){this.elem.style.left=Math.floor(Math.random()*Math.floor(this.boradX/10))*10+"px",this.elem.style.top=Math.floor(Math.random()*Math.floor(this.boradY/10))*10+"px"}}const l=class{constructor(){s(this,"elemS");s(this,"elemL");l.score=0,this.elemS=document.getElementById("score"),this.elemL=document.getElementById("lv")}setScore(e){l.score=e,this.elemS.innerText=String(l.score),this.elemL.innerText=String(l.score/10)}};let h=l;s(h,"score");class k{constructor(){s(this,"Timer");s(this,"snake");s(this,"head");s(this,"headIndex");s(this,"nextHeadIndex");s(this,"bodies");this.snake=document.getElementById("snake"),this.head=document.querySelector("#snake > div"),this.bodies=document.querySelectorAll("#snake div"),this.headIndex=this.bodies.length-1,this.nextHeadIndex=this.bodies.length-1}getX(){return this.head.offsetLeft}getY(){return this.head.offsetTop}move(e){e.moveX!=null&&(this.bodies[this.headIndex].style.top=`${this.getY()}px`,this.bodies[this.headIndex].style.left=`${this.getX()+e.moveX}px`),e.moveY!=null&&(this.bodies[this.headIndex].style.left=`${this.getX()}px`,this.bodies[this.headIndex].style.top=`${this.getY()+e.moveY}px`),this.head=this.bodies[this.headIndex],this.nextHeadIndex=this.headIndex,this.headIndex<=0?this.headIndex=this.bodies.length-1:this.headIndex-=1}}const n=class{constructor(){s(this,"Timer");s(this,"snake");s(this,"food");s(this,"score");s(this,"artBoard");s(this,"direction");s(this,"isPause");this.artBoard=document.getElementById("artboard"),this.food=new g(this.artBoard.clientWidth,this.artBoard.clientHeight),this.snake=new k,this.score=new h}snakeMove(e){let t={};if(this.direction==="ArrowUp"&&e==="ArrowDown"||this.direction==="ArrowDown"&&e==="ArrowUp"||this.direction==="ArrowLeft"&&e==="ArrowRight"||this.direction==="ArrowRight"&&e==="ArrowLeft")return console.error("\u4E0D\u53EF\u56DE\u5934"),!0;switch(this.direction=e,this.direction){case"ArrowUp":t.moveY=-10,n.lastDivStyle.left=0,n.lastDivStyle.top=10;break;case"ArrowDown":t.moveY=10,n.lastDivStyle.left=0,n.lastDivStyle.top=-10;break;case"ArrowLeft":t.moveX=-10,n.lastDivStyle.left=10,n.lastDivStyle.top=0;break;case"ArrowRight":t.moveX=10,n.lastDivStyle.left=-10,n.lastDivStyle.top=0;break}clearInterval(Number(this.Timer)),this.Timer=setInterval(()=>{this.snake.move(t),this.snakeEatFood(),this.getSnakeStatus()},200)}snakeEatFood(){if(this.snake.getX()===this.food.getX()&&this.snake.getY()===this.food.getY()){this.score.setScore(h.score+10),this.food.change(),this.snake.snake.appendChild(document.createElement("div")),this.snake.bodies=document.querySelectorAll("#snake div");let e=this.snake.bodies[this.snake.bodies.length-2],t=this.snake.bodies[this.snake.bodies.length-1];t.style.top=`${e.offsetTop+n.lastDivStyle.top}px`,t.style.left=`${e.offsetLeft+n.lastDivStyle.left}px`}}getSnakeStatus(){let e=!1;this.snake.bodies.forEach((t,d)=>{this.snake.nextHeadIndex!=d&&this.snake.getX()===t.offsetLeft&&this.snake.getY()===t.offsetTop&&(e=!0)}),(this.snake.getX()<0||this.snake.getX()>this.artBoard.clientWidth||this.snake.getY()<0||this.snake.getY()>this.artBoard.clientHeight)&&(e=!0),e&&(alert("\u86C7\u5DF2\u6B7B\u4EA1"),this.reseteSurientSnake())}reseteSurientSnake(){clearInterval(Number(this.Timer)),this.snake.snake.innerHTML="<div></div><div></div><div></div><div></div>",this.snake.head=document.querySelector("#snake > div"),this.snake.bodies=document.querySelectorAll("#snake div"),this.snake.headIndex=this.snake.bodies.length-1,this.food.change(),this.score.setScore(0)}};let c=n;s(c,"lastDivStyle",{top:0,left:0});const r=new c;function f(o,e){let t=0;return function(){let d=Date.now();Date.now()-t>e&&(o.apply(this,arguments),t=d)}}document.addEventListener("keydown",f(o=>{r.isPause?(r.snakeMove(r.direction),r.isPause=!1):["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(o.code)&&r.snakeMove(o.code)},200));document.getElementById("start").addEventListener("click",f(()=>{r.isPause?(r.snakeMove(r.direction),r.isPause=!1):r.snakeMove("ArrowRight")},200));document.getElementById("pause").addEventListener("click",f(()=>{clearInterval(Number(r.Timer)),r.isPause=!0},200));document.getElementById("stop").addEventListener("click",f(()=>{r.reseteSurientSnake()},200));
